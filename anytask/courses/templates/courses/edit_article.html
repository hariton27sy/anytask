{% extends "base.html" %}
{% load i18n %}
{% load django_bootstrap_breadcrumbs %}
{% load crispy_forms_tags %}
{% load sanitize_html icon %}
{% load dict_func %}
{% load task_taken_func %}
{% load info %}
{% get_current_language as LANGUAGE_CODE %}

{% block title %}{{ course.name }} | {{ course.year }}{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% if school %}
        {% breadcrumb school.name school.get_absolute_url %}
    {% endif %}
    {% if not seminar %}
        {% breadcrumb course.name course.get_absolute_url %}
    {% else %}
        {% breadcrumb course.name course.get_absolute_url %}
        {% breadcrumb seminar|get_title:LANGUAGE_CODE "" %}
    {% endif %}
    {% breadcrumb_for "" %}
        {%  trans "redaktirovanie_statii" %}
    {% endbreadcrumb_for %}
{% endblock breadcrumbs %}

{% block scripts %}
    {% include "courses/edit_article_js.html" %}
{% endblock scripts %}

{% block navbar %}
    <ul class="nav navbar-nav">
        <li class="nav-item">
            <a class="nav-link" href="{{ course.get_absolute_url }}">{% trans "stranica_kursa" %}</a>
        </li>
        <li class="nav-item">
            <a class="nav-link"
               href="{{ course.get_absolute_url }}/gradebook">{% trans "obshaja_vedomost" %}</a>
        </li>
        {% if visible_attendance_log %}
            <li class="nav-item">
                <a class="nav-link hidden-md" href="{{ course.get_absolute_url }}/attendance">{% trans "zhurnal_poseshaemosti" %}</a>
                <a class="nav-link visible-md" href="{{ course.get_absolute_url }}/attendance">{% trans "poseshaemost" %}</a>
            </li>
        {% endif %}
        {% if visible_queue %}
            <li class="nav-item">
                <a class="nav-link" href="{% url "courses.views.queue_page" course.id %}">{% trans "ochered_na_proverku" %}</a>
            </li>
        {% endif %}
        {% if user_is_teacher %}
            <li class="nav-item">
                <a class="nav-link" href="{% url "courses.views.course_settings" course.id %}">{% trans "nastrojki" %}</a>
            </li>
        {% endif %}
    </ul>
{% endblock navbar %}

{% block content %}
    {{ block.super }}
    <style>
        .asteriskField {
            display: none;
        }

        .card .card-block-part {
            margin-bottom: 1.5rem;
            border-bottom-width: 1px;
            border-bottom-color: rgb(221, 221, 221);
            border-bottom-style: solid;
        }

        .card .card-block-part:last-child {
            margin-bottom: 0;
            border-bottom-style: none;
        }

        .ms-container {
            width: 100%;
        }

        .multiselect-container li:not(.multiselect-item) {
            padding-left: 20px;
        }

        .multiselect-container li.multiselect-group label {
            padding-left: 40px;
        }

        #card_contest .form-group .btn-div {
            margin-top: 1rem;
        }

        .output-block{
            max-height: 30rem;
            overflow: auto;
            margin-top: 1rem;
        }

        .output-block div:first-child {
            border-top-left-radius: 0.25rem;
            border-top-right-radius: 0.25rem;
        }

        .output-block div:last-child {
            border-bottom-right-radius: 0.25rem;
            border-bottom-left-radius: 0.25rem;
        }

        .output-success {
            display: none;
            color: #3c763d;
            background-color: #dff0d8;
            padding: 15px;
        }

        .output-danger {
            display: none;
            color: #a94442;
            background-color: #f2dede;
            padding: 15px;
        }

        @media (min-width: 992px) {
            #card_contest .form-group .btn-div {
                margin-top: 0;
            }
        }

        @media (min-width: 768px) {
            .row .col-sm-12:not(:last-child) {
                padding-right: 0;
            }

            .row .col-sm-12:first-child {
                padding-right: 0;
            }
        }
    </style>
    <form id="course_article_form" action="{{ request.get_full_path }}" method="POST" >
        {% csrf_token %}
        <div class="col ">
            <div class="card card-block" >
                {% for field in form %}
                    {% if field.is_hidden %}
                        {{ field }}
                    {% else %}
                        <div class="form-group row">
                            <label for="{{ field.id_for_label }}"
                                   class="col-lg-3 col-md-3 col-sm-4 col-xs-5 form-control-label">{{ field.label }}</label>
                            <div class="controls col-lg-6 col-md-6 col-sm-7 col-xs-7">
                                {{ field }}
                                <small class="text-help" id="course_article_{{ field.name }}_error_text"></small>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

        <div style="margin-top: 1rem;">
            <div id="course_article_form_error_text"></div>
            <div class="btn-group pull-xs-right" role="group">
                <button type="button" id="button_cancel_quit" class="btn btn-secondary">{% trans "otmenit_i_vyjti" %}</button>
                <button type="button" id="button_save" class="btn btn-secondary">{% trans "sohranit_i_prodolzhit" %}</button>
                <button type="button" id="button_save_quit" class="btn btn-primary">{% trans "sohranit_i_vyjti" %}</button>
            </div>
        </div>
    </form>

{% endblock %}